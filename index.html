<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta http-equiv="pragma" content="no-cache" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="-1" />
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=10">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <title>Marvel War of Heroes</title>
    <link rel="stylesheet" type="text/css" href="stylesheets/pex.css" media="all">
    <script type="text/javascript" src="javascripts/pex.min.js"></script>
    <script type="text/javascript">
      addEventListener("DOMContentLoaded", function() { setTimeout(hideURLbar, 100); }, false) ;
      function hideURLbar()
      {
        if (window.pageYOffset === 0)
        {
          window.scrollTo(0,1);
        }
      }
    </script>
    <script type="text/javascript">
      var height = window.innerHeight * 2;
      var width = window.innerWidth * 2;
      var isTouch = ('ontouchstart' in window);
      var isSp = false;
      if(isTouch === false){
          isSp = false;
      }
      else if(window.orientation === undefined) {
          isSp = false;
      }else{
          isSp = true;
      }
      if(!(isSp)){
        height = 600;
        width = 480;
      }
      var scale = width / 240;
      var swfHeight = 300 * scale;
      var topMargin = 0;
      if(height > swfHeight){
        topMargin = Math.floor((height - swfHeight) / 2);
      }else{
        topMargin = 0;
      }
      window.onunload = function() {}; 
      window.onload = function() {
        var option = {
          enableButton: true,
          enableTouch: true,
          partialDraw : true,
          delayEval : false,
          width : width
        };
        document.getElementById("container").style.marginTop=(topMargin)+"px";
       // var swf_file = document.getElementById("select_swf").val();
        var pex = new Pex("n_edit.swf", "container", option);
        
        // {if !isset($timeOutTime)}{assign var="timeOutTime"  value="150000"}{/if}
        // {if !isset($errPage)}{assign var="errPage"  value="error/"}{/if}

        // timerId = setTimeout("isFlash()",{$timeOutTime}); {** // flashが返却されなかったときエラーページへ **}
      };
      
      //function init() {
      //  document.addEventListener("touchstart", touchHandler, false);
      //  document.addEventListener("touchmove", touchHandler, false);
      //  document.addEventListener("touchend", touchHandler, false);
      //};
      function touchHandler(event) {
        event.preventDefault();
      };
      function redirect(){
        location.href="{$errPage|site_url}";
      };
      function isFlash(){
        var container = document.getElementById("container");
        var children = container.childNodes;
        if(children.length < 1){
          redirect();
        } else {
          clearTimeout(timerId);
        }
      };
    </script>
  </head>
  <body>
    <div id="container" style="zoom:50%;"></div>
  </body>
</html>
